{"version":3,"file":"packet.js","sourceRoot":"","sources":["../../../test/benchmarks/packet.ts"],"names":[],"mappings":";;AAAA,MAAM,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAA;AACtC,kCAAiC;AACjC,MAAM,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACjC,IAAI,CAAC,SAAS,EAAE;IACd,OAAO,CAAC,KAAK,CAAC,cAAc,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,CAAA;IAC5E,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;CAChB;AACD,MAAM,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,CAAA;AAEnC,MAAM,aAAa,GAA8B;IAC/C,IAAI,EAAE,QAAQ,CAAC,YAAY;IAC3B,SAAS,EAAE,GAAG;IACd,IAAI,EAAE;QACJ,YAAY,EAAE,CAAC;gBACb,YAAY,EAAE,KAAK;gBACnB,WAAW,EAAE,QAAQ,CAAC,6BAA6B;gBACnD,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,sNAAsN,EAAE,KAAK,CAAC;aACjP,CAAC;KACH;CACF,CAAA;AACD,MAAM,aAAa,GAAG,QAAQ,CAAC,SAAS,CAAC,aAAa,CAAC,CAItD;AAAA,CAAC,IAAI,SAAS,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC;KACzC,GAAG,CAAC,IAAI,EAAE,cAAc,QAAQ,CAAC,SAAS,CAAC,aAAa,CAAC,CAAA,CAAC,CAAC,CAAC;KAC5D,GAAG,CAAC,IAAI,EAAE,cAAc,QAAQ,CAAC,SAAS,CAAC,aAAa,CAAC,CAAA,CAAC,CAAC,CAAC;KAC5D,EAAE,CAAC,OAAO,EAAE,UAAS,KAAU;IAC9B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;AACrD,CAAC,CAAC;KACD,GAAG,CAAC,EAAE,CAAC,CAET;AAAA,CAAC,IAAI,SAAS,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAC;KAC3C,GAAG,CAAC,IAAI,EAAE,cAAc,QAAQ,CAAC,WAAW,CAAC,aAAa,CAAC,CAAA,CAAC,CAAC,CAAC;KAC9D,GAAG,CAAC,IAAI,EAAE,cAAc,QAAQ,CAAC,WAAW,CAAC,aAAa,CAAC,CAAA,CAAC,CAAC,CAAC;KAC9D,EAAE,CAAC,OAAO,EAAE,UAAS,KAAU;IAC9B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;AACrD,CAAC,CAAC;KACD,GAAG,CAAC,EAAE,CAAC,CAAA","sourcesContent":["const Benchmark = require('benchmark')\nimport * as PacketV1 from '../..'\nconst packageV0 = process.argv[2]\nif (!packageV0) {\n  console.error('usage: node ' + process.argv.slice(0, 2).join(' ') + ' <v0>')\n  process.exit(1)\n}\nconst PacketV0 = require(packageV0)\n\nconst messagePacket: PacketV1.BtpMessagePacket = {\n  type: PacketV1.TYPE_MESSAGE,\n  requestId: 123,\n  data: {\n    protocolData: [{\n      protocolName: 'ilp',\n      contentType: PacketV1.MIME_APPLICATION_OCTET_STREAM,\n      data: Buffer.from('0c68000000000000006b323031373132323330313231343035343974e1136dc71c9e5f283bec83461cbf1261c4014f72d48f8dd65453a0b84e7de10d6578616d706c652e616c696365205db343fdc41898f6df4202329139dc242dd0f558a811b46b28918fdab37c6cb0', 'hex')\n    }]\n  }\n}\nconst messageBuffer = PacketV1.serialize(messagePacket)\n\n// TODO test Transfer, Response, Error\n\n;(new Benchmark.Suite('serialize: Message'))\n  .add('v0', function () { PacketV0.serialize(messagePacket) })\n  .add('v1', function () { PacketV1.serialize(messagePacket) })\n  .on('cycle', function(event: any) {\n    console.log(this.name, '\\t', String(event.target));\n  })\n  .run({})\n\n;(new Benchmark.Suite('deserialize: Message'))\n  .add('v0', function () { PacketV0.deserialize(messageBuffer) })\n  .add('v1', function () { PacketV1.deserialize(messageBuffer) })\n  .on('cycle', function(event: any) {\n    console.log(this.name, '\\t', String(event.target));\n  })\n  .run({})\n"]}